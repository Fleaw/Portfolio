<div class="columns">
  <aside class="column sidebar is-narrow">
    <section class="section">
      <nav class="menu">
        <ul class="menu-list">
          ${Menu}
          <template id="MenuItem">
            <li><a class="${Active}" href="${Url}">${Text}</a></li>
          </template>
        </ul>
      </nav>
    </section>
  </aside>
  <div class="column">
      <section class="section">
          ${Body}

          <div id="notification-area">
              <div>${Error}</div>
          </div>

          <template id="Home">
              <div class="content">
                  <h1 class="title">Welcome to Bolero!</h1>
                  <p>This application demonstrates Bolero's major features.</p>
                  <ul>
                      <li>
                          The entire application is driven by
                          <a target="_blank" href="https://fsbolero.github.io/docs/Elmish">Elmish</a>.
                      </li>
                      <li>
                          The menu on the left switches pages based on
                          <a target="_blank" href="https://fsbolero.github.io/docs/Routing">routes</a>.
                      </li>
                      <li>
                          The <a href="/counter">Counter</a> page demonstrates event handlers and data binding in
                          <a target="_blank" href="https://fsbolero.github.io/docs/Templating">HTML templates</a>.
                      </li>
                      <li>
                          The <a href="/data">Download data</a> page demonstrates the use of
                          <a target="_blank" href="https://fsbolero.github.io/docs/Remoting">remote functions</a>.
                      </li>
                  </ul>
                  <p>Enjoy writing awesome apps!</p>
              </div>
          </template>

          <template id="Counter">
              <h1 class="title">A simple counter</h1>
              <p>
                  <button onclick="${Decrement}" class="button">-</button>
                  <input type="number" id="counter" class="input" bind="${Value}">
                  <button onclick="${Increment}" class="button">+</button>
              </p>
              <p>
                  The counter's value is: ${Value}
              </p>
          </template>

          <template id="Data">
              <h1 class="title">
                  Download data
                  <button class="button" onclick="${Reload}">Reload</button>
              </h1>
              <p>
                  Signed in as ${Username}.
                  <button class="button" onclick="${SignOut}">Sign out</button>
              </p>
              <table class="table is-fullwidth">
                  <thead>
                      <tr>
                          <th>Title</th>
                          <th>Author</th>
                          <th>Published</th>
                          <th>ISBN</th>
                      </tr>
                  </thead>
                  <tbody>
                      ${Rows}
                      <template id="EmptyData">
                          <tr><td colspan="4">Downloading book list...</td></tr>
                      </template>
                  </tbody>
              </table>
          </template>

          <template id="SignIn">
              <h1 class="title">Sign in</h1>
              <form onsubmit="${SignIn}">
                  <div class="field">
                      <label class="label">Username</label>
                      <div class="control">
                          <input class="input" bind="${Username}" />
                      </div>
                  </div>
                  <div class="field">
                      <label class="label">Password</label>
                      <div class="control">
                          <input class="input" type="password" bind="${Password}" />
                      </div>
                  </div>
                  <div class="field">
                      <div class="control">
                          <input type="submit" value="Sign in" />
                      </div>
                  </div>
                  ${ErrorNotification}
              </form>
          </template>

          <template id="ErrorNotification">
              <div class="notification is-warning">
                  <button class="delete ${HideClass}" onclick="${Hide}"></button>
                  ${Text}
              </div>
          </template>


          <template id="Game">
              <div id="unity-container" class="unity-desktop">
                  <canvas id="unity-canvas"></canvas>
                  <div id="unity-loading-bar">
                      <div id="unity-logo"></div>
                      <div id="unity-progress-bar-empty">
                          <div id="unity-progress-bar-full"></div>
                      </div>
                  </div>
                  <div id="unity-footer">
                      <div id="unity-webgl-logo"></div>
                      <div id="unity-fullscreen-button"></div>
                      <div id="unity-build-title">Zugloog</div>
                  </div>
              </div>
              <script>
                  var buildUrl = "Build";
                  var loaderUrl = buildUrl + "/Zugloog - WebGL.loader.js";
                  var config = {
                      dataUrl: buildUrl + "/Zugloog - WebGL.data",
                      frameworkUrl: buildUrl + "/Zugloog - WebGL.framework.js",
                      codeUrl: buildUrl + "/Zugloog - WebGL.wasm",
                      streamingAssetsUrl: "StreamingAssets",
                      companyName: "Fleaw",
                      productName: "Zugloog",
                      productVersion: "1.0.0",
                  };

                  var container = document.querySelector("#unity-container");
                  var canvas = document.querySelector("#unity-canvas");
                  var loadingBar = document.querySelector("#unity-loading-bar");
                  var progressBarFull = document.querySelector("#unity-progress-bar-full");
                  var fullscreenButton = document.querySelector("#unity-fullscreen-button");

                  if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
                      container.className = "unity-mobile";
                      config.devicePixelRatio = 1;
                  } else {
                      canvas.style.width = "960px";
                      canvas.style.height = "600px";
                  }
                  loadingBar.style.display = "block";

                  var script = document.createElement("script");
                  script.src = loaderUrl;
                  script.onload = () => {
                      createUnityInstance(canvas, config, (progress) => {
                          progressBarFull.style.width = 100 * progress + "%";
                      }).then((unityInstance) => {
                          loadingBar.style.display = "none";
                          fullscreenButton.onclick = () => {
                              unityInstance.SetFullscreen(1);
                          };
                      }).catch((message) => {
                          alert(message);
                      });
                  };
                  document.body.appendChild(script);
              </script>
          </template>

      </section>
  </div>
</div>
